<div
    id="auto_multi_image_container"
    class="extension_container auto-multi-image-settings"
>
    <div class="inline-drawer auto-multi-drawer">
        <div
            class="inline-drawer-toggle inline-drawer-header auto-multi-drawer__toggle"
        >
            <div
                class="flex-container alignitemscenter flexGap10 auto-multi-drawer__header"
            >
                <i class="fa-solid fa-images"></i>
                <div class="auto-multi-drawer__header-text">
                    <h4 class="margin0">Auto Multi-Image</h4>
                    <p class="extension_descr margin0">
                        Queue extra Stable Diffusion swipes whenever a generated
                        image lands.
                    </p>
                </div>
            </div>
            <div
                class="inline-drawer-icon fa-solid fa-circle-chevron-down down auto-multi-drawer__icon"
            ></div>
        </div>
        <div class="inline-drawer-content auto-multi-ui">
            <section class="auto-multi-hero">
                <div class="auto-multi-hero__badge">
                    <i class="fa-solid fa-sparkles"></i>
                    <span>Auto Multi-Image</span>
                </div>
                <h4>Batch swipes. Compare vibes.</h4>
                <p>
                    Layer multiple Stable Diffusion models, pace them with
                    millisecond precision, or kick everything off in a single
                    burst so faster workers finish first.
                </p>
                <div class="auto-multi-hero__chips">
                    <span
                        ><i class="fa-solid fa-layer-group"></i> Multi-model
                        queue</span
                    >
                    <span
                        ><i class="fa-solid fa-gauge-high"></i> Burst
                        dispatch</span
                    >
                    <span
                        ><i class="fa-solid fa-bars-progress"></i> Global
                        progress HUD</span
                    >
                </div>
            </section>

            <section class="auto-multi-panel">
                <header>
                    <div>
                        <p class="eyebrow">
                            <i class="fa-solid fa-power-off"></i> Automation
                            control
                        </p>
                        <h5>Toggle the autopilot</h5>
                    </div>
                    <p class="caption">
                        Once enabled, every SD message auto-fills to your swipe
                        goals.
                    </p>
                </header>
                <label class="checkbox_label auto-multi-toggle">
                    <input type="checkbox" id="auto_multi_image_enabled" />
                    <span>Enable automatic swipes</span>
                </label>
            </section>

            <section class="auto-multi-panel">
                <header>
                    <div>
                        <p class="eyebrow">
                            <i class="fa-solid fa-wave-square"></i> Timing &
                            strategy
                        </p>
                        <h5>Dial in swipe cadence</h5>
                    </div>
                    <p class="caption">
                        Mix deliberate pacing with all-out bursts to suit wildly
                        different backend speeds.
                    </p>
                </header>
                <div class="auto-multi-grid">
                    <label>
                        <span>Default swipes per model</span>
                        <input
                            type="number"
                            min="1"
                            max="12"
                            step="1"
                            id="auto_multi_image_target"
                            class="text_pole"
                        />
                    </label>
                    <label>
                        <span>Delay between swipes (ms)</span>
                        <input
                            type="number"
                            min="0"
                            max="10000"
                            step="50"
                            id="auto_multi_image_delay"
                            class="text_pole"
                        />
                    </label>
                    <label>
                        <span>Burst throttle (ms)</span>
                        <input
                            type="number"
                            min="0"
                            max="5000"
                            step="25"
                            id="auto_multi_burst_throttle"
                            class="text_pole"
                        />
                    </label>
                </div>
                <label
                    class="checkbox_label auto-multi-inline"
                    title="Burst mode is deprecated and disabled."
                >
                    <input type="checkbox" id="auto_multi_burst_mode" disabled />
                    <span>Fire all swipes at once (burst mode)</span>
                </label>
                <p class="note auto-multi-burst-note margin0">
                    Burst mode is deprecated and currently disabled to prevent
                    Stable Diffusion requests from aborting each other.
                </p>
            </section>

            <section class="auto-multi-panel">
                <header>
                    <div>
                        <p class="eyebrow">
                            <i class="fa-solid fa-image"></i> Auto generation
                        </p>
                        <h5>Generate images from tags</h5>
                    </div>
                    <p class="caption">
                        Detect <pic prompt="..."> tags in AI replies and
                        generate images automatically.
                    </p>
                </header>
                <label class="checkbox_label auto-multi-toggle">
                    <input type="checkbox" id="auto_multi_auto_gen_enabled" />
                    <span>Enable auto image generation</span>
                </label>
                <div class="auto-multi-grid">
                    <label>
                        <span>Insert mode</span>
                        <select
                            id="auto_multi_auto_gen_insert_type"
                            class="text_pole"
                        >
                            <option value="disabled">Disabled</option>
                            <option value="inline">Insert in current message</option>
                            <option value="replace">Inline replace tag</option>
                            <option value="new">Create new message</option>
                        </select>
                    </label>
                    <label>
                        <span>Prompt injection position</span>
                        <select id="auto_multi_prompt_position" class="text_pole">
                            <option value="deep_system">@D ‚öôÔ∏è System</option>
                            <option value="deep_user">@D üë§ User</option>
                            <option value="deep_assistant">@D ü§ñ Assistant</option>
                        </select>
                    </label>
                    <label>
                        <span>Prompt injection depth</span>
                        <input
                            type="number"
                            min="0"
                            max="100"
                            step="1"
                            id="auto_multi_prompt_depth"
                            class="text_pole"
                        />
                    </label>
                </div>
                <label class="checkbox_label auto-multi-inline">
                    <input
                        type="checkbox"
                        id="auto_multi_prompt_injection_enabled"
                    />
                    <span>Enable prompt injection</span>
                </label>
                <div class="auto-multi-stack">
                    <label>
                        <span>Prompt template</span>
                        <textarea
                            id="auto_multi_prompt_template"
                            class="text_pole auto-multi-textarea"
                            rows="3"
                        ></textarea>
                    </label>
                    <label>
                        <span>Regex (capture group 1 = prompt)</span>
                        <textarea
                            id="auto_multi_prompt_regex"
                            class="text_pole auto-multi-textarea"
                            rows="2"
                        ></textarea>
                    </label>
                </div>
            </section>

            <section class="auto-multi-panel auto-multi-panel--queue">
                <header>
                    <div>
                        <p class="eyebrow">
                            <i class="fa-solid fa-cubes"></i> Model queue
                        </p>
                        <h5>Compose your lineup</h5>
                    </div>
                    <div
                        class="auto-multi-model-queue__actions flex-container flexGap5"
                    >
                        <button
                            id="auto_multi_refresh_models"
                            class="menu_button fa-solid fa-arrows-rotate"
                            title="Refresh the model list"
                        ></button>
                        <button
                            id="auto_multi_add_model"
                            class="menu_button auto-multi-add-model"
                        >
                            <span class="fa-solid fa-plus"></span>
                            <span>Add model</span>
                        </button>
                    </div>
                </header>
                <p class="caption">
                    Each row pins a model + swipe count. Leave the list empty to
                    mirror the SD panel selection.
                </p>
                <div
                    id="auto_multi_model_rows"
                    class="auto-multi-model-rows"
                ></div>
            </section>

            <section class="auto-multi-panel auto-multi-panel--summary">
                <header>
                    <div>
                        <p class="eyebrow">
                            <i class="fa-solid fa-chart-line"></i> Live summary
                        </p>
                        <h5>At-a-glance plan</h5>
                    </div>
                </header>
                <p id="auto_multi_image_summary" class="auto-multi-summary"></p>
            </section>
        </div>
    </div>
</div>
